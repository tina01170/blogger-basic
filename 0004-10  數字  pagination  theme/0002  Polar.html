<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Le Blog https://www.way2themes.com/</title>
    <style>
      #blog-pager{
          float:left;
          width:100%;
          overflow:hidden;
          clear:both;
          margin:30px 0
      }
      .blog-pager a,.blog-pager span{
          float:left;
          display:block;
          min-width:30px;
          height:30px;
          background-color:#f2f2f2;
          color:$(title.color);
          font-size:13px;
          font-weight:700;
          line-height:30px;
          text-align:center;
          box-sizing:border-box;
          padding:0 10px;
          margin:0 5px 0 0;
          border-radius:2px;
          transition:all .17s ease
      }
      .blog-pager span.page-dots{
          min-width:20px;
          background-color:#fff;
          font-size:16px;
          color:$(body.text.color);
          font-weight:400;
          line-height:32px;
          padding:0
      }
      .blog-pager .page-of{
          display:none;
          width:auto;
          float:right;
          border-color:rgba(0,0,0,0);
          margin:0
      }
      .blog-pager .page-active,.blog-pager a:hover{
          background-color:$(main.color);
          color:#fff;
          border-color:$(main.color)
      }
      .blog-pager .page-prev:before,.blog-pager .page-next:before{
          font-family:FontAwesome;
          font-size:11px;
          font-weight:400
      }
      .blog-pager .page-prev:before{
          content:'\f053'
      }
      .blog-pager .page-next:before{
          content:'\f054'
      }
      .blog-pager .blog-pager-newer-link,.blog-pager .blog-pager-older-link{
          float:left;
          display:inline-block;
          width:auto;
          padding:0 10px;
          margin:0
      }
      .blog-pager .blog-pager-older-link{
          float:right
      }
      .archive #blog-pager,.home .blog-pager .blog-pager-newer-link,.home .blog-pager .blog-pager-older-link{
          display:none
      }

    </style>
  </head>
  <body>
    <script>
        $('.mobile-menu ul > li a').each(function() {
            var $this = $(this),
                text = $this.attr('href').trim(),
                type = text.toLowerCase(),
                map = text.split('/'),
                label = map[0];
            if (type.match('mega-menu')) {
                $this.attr('href', '/search/label/' + label + '?&max-results=' + postPerPage);
            }
        });        
        $('.Label a, a.b-label, a.post-tag').attr('href', function($this, href) {
            return href.replace(href, href + '?&max-results=' + postPerPage);
        });
    </script>
    
    <!-- Pagination Scripts -->
    <b:if cond='data:view.isMultipleItems'>
    <script type='text/javascript'>
    //<![CDATA[
    var postResults=postPerPage;
    var numOfPages=2;
    var pageOf=["Page", "of"];
    eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--){d[e(c)]=k[c]||e(c)}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('5 K;5 m;5 l;5 w;5 s=1p.9;5 y="/";1d();G 1b(a){5 b=\'\';J=M(W/2);4(J==W-J){W=J*2+1}D=l-J;4(D<1)D=1;j=M(a/n)+1;4(j-1==a/n)j=j-1;E=D+W-1;4(E>j)E=j;b+=\'<C 6="3-1u">\'+17[0]+\' \'+l+\' \'+17[1]+\' \'+j+\'</C>\';5 c=M(l)-1;4(l>1){4(l==2){4(m==\'3\'){b+=\'<a 6="3-7 3-U" 9="\'+y+\'"></a>\'}h{b+=\'<a 6="3-7 3-U" 9="/v/u/\'+w+\'?&i-o=\'+n+\'"></a>\'}}h{4(m==\'3\'){b+=\'<a 6="3-7 3-U" 9="#" z="L(\'+c+\');B x"></a>\'}h{b+=\'<a 6="3-7 3-U" 9="#" z="I(\'+c+\');B x"></a>\'}}}4(D>1){4(m=="3"){b+=\'<a 6="3-7" 9="\'+y+\'">1</a>\'}h{b+=\'<a 6="3-7" 9="/v/u/\'+w+\'?&i-o=\'+n+\'">1</a>\'}}4(D>2){b+=\'<C 6="3-7 3-16">...</C>\'}1a(5 d=D;d<=E;d++){4(l==d){b+=\'<C 6="3-7 3-1v">\'+d+\'</C>\'}h 4(d==1){4(m==\'3\'){b+=\'<a 6="3-7" 9="\'+y+\'">1</a>\'}h{b+=\'<a 6="3-7" 9="/v/u/\'+w+\'?&i-o=\'+n+\'">1</a>\'}}h{4(m==\'3\'){b+=\'<a 6="3-7" 9="#" z="L(\'+d+\');B x">\'+d+\'</a>\'}h{b+=\'<a 6="3-7" 9="#" z="I(\'+d+\');B x">\'+d+\'</a>\'}}}4(E<j-1){b+=\'<C 6="3-7 3-16">...</C>\'}4(E<j){4(m=="3"){b+=\'<a 6="3-7" 9="#" z="L(\'+j+\');B x">\'+j+\'</a>\'}h{b+=\'<a 6="3-7" 9="#" z="I(\'+j+\');B x">\'+j+\'</a>\'}}5 e=M(l)+1;4(l<j){4(m==\'3\'){b+=\'<a 6="3-7 3-15" 9="#" z="L(\'+e+\');B x"></a>\'}h{b+=\'<a 6="3-7 3-15" 9="#" z="I(\'+e+\');B x"></a>\'}}b+=\'\';5 f=A.1s(\'1t\');5 g=A.1r(\'1A-1D\');1a(5 p=0;p<f.O;p++){f[p].1c=b}4(f&&f.O>0){b=\'\'}4(g){g.1c=b}}G 12(a){5 b=a.1f;5 c=M(b.1E$1B.$t,10);1b(c)}G 1d(){5 a=s;4(a.k(\'/v/u/\')!=-1){4(a.k(\'?T-i\')!=-1){w=a.H(a.k(\'/v/u/\')+14,a.k(\'?T-i\'))}h{w=a.H(a.k(\'/v/u/\')+14,a.k(\'?&i\'))}}4(a.k(\'?q=\')==-1&&a.k(\'.1C\')==-1){4(a.k(\'/v/u/\')==-1){m=\'3\';4(s.k(\'#F=\')!=-1){l=s.H(s.k(\'#F=\')+8,s.O)}h{l=1}A.18(\'<r Q=\\\'\'+y+\'P/R/N?i-o=1&X=Y-S-r&V=12\\\'><\\/r>\')}h{m=\'u\';4(a.k(\'&i-o=\')==-1){n=1F}4(s.k(\'#F=\')!=-1){l=s.H(s.k(\'#F=\')+8,s.O)}h{l=1}A.18(\'<r Q="\'+y+\'P/R/N/-/\'+w+\'?X=Y-S-r&V=12&i-o=1" ><\\/r>\')}}}G L(a){Z=(a-1)*n;K=a;5 b=A.1h(\'1q\')[0];5 c=A.1o(\'r\');c.1e=\'1m/1n\';c.1i(\'Q\',y+\'P/R/N?1j-1k=\'+Z+\'&i-o=1&X=Y-S-r&V=13\');b.1l(c)}G I(a){Z=(a-1)*n;K=a;5 b=A.1h(\'1q\')[0];5 c=A.1o(\'r\');c.1e=\'1m/1n\';c.1i(\'Q\',y+\'P/R/N/-/\'+w+\'?1j-1k=\'+Z+\'&i-o=1&X=Y-S-r&V=13\');b.1l(c)}G 13(a){11=a.1f.1x[0];5 b=11.1g.$t.H(0,19)+11.1g.$t.H(1z,1w);5 c=1y(b);4(m==\'3\'){5 d=\'/v?T-i=\'+c+\'&i-o=\'+n+\'#F=\'+K}h{5 d=\'/v/u/\'+w+\'?T-i=\'+c+\'&i-o=\'+n+\'#F=\'+K}1p.9=d}',62,104,'|||page|if|var|class|num||href||||||||else|max|lastPageNo|indexOf|currentPageNo|currentPage|postResults|results|||script|locationUrl||label|search|postLabel|false|home_page|onclick|document|return|span|pageStart|pageEnd|PageNo|function|substring|getLabelPage|pageNumber|noPage|getPage|parseInt|summary|length|feeds|src|posts|in|updated|prev|callback|numOfPages|alt|json|jsonstart||post|dataFeed|findPostDate||next|dots|pageOf|write||for|startPagination|innerHTML|pageCurrentBlogger|type|feed|published|getElementsByTagName|setAttribute|start|index|appendChild|text|javascript|createElement|location|head|getElementById|getElementsByName|pageArea|of|active|29|entry|encodeURIComponent|23|blog|totalResults|html|pager|openSearch|20'.split('|'),0,{}))
    //]]>
    </script>
    </b:if>
    
    <script>
        var noPage;
        var currentPage;
        var currentPageNo;   // 目前所在的頁碼
        var postLabel;
        var locationUrl = location.href;
        var home_page = "/";
        pageCurrentBlogger();

        // numOfPages  顯示的頁碼總數。
        // pageNumber  計算起始頁碼的輔助變數
        // pageStart: 顯示的起始頁碼。
        // lastPageNo: 總頁數。
        // pageEnd: 顯示的結束頁碼。
        // a: 總資料量。
        // postResults: 每頁顯示的資料數量。
        // pageOf: 包含「第」和「頁」等文字的陣列，用於顯示頁碼資訊。
        // b: 用於儲存產生的 HTML 字串。
        // c: 目前頁碼的前一頁 

        // 產生分頁連結。
        function startPagination(a) {
            var b = '';
            pageNumber = parseInt(numOfPages / 2);

            // 確保顯示的頁碼總數為奇數，以方便將當前頁碼置中顯示。
            if(pageNumber == numOfPages - pageNumber) {
                numOfPages = pageNumber * 2 + 1
            }
            pageStart = currentPageNo - pageNumber;

            if(pageStart < 1) pageStart = 1;  // 如果起始頁碼小於 1則將其設為 1，是確保起始頁碼不會是負數或0 

            // 計算總頁數。
            lastPageNo = parseInt(a / postResults) + 1;

            // 校正最後一頁的頁碼，避免出現多餘的頁碼。
            if(lastPageNo - 1 == a / postResults) lastPageNo = lastPageNo - 1;
            
            //計算結束頁碼。
            pageEnd = pageStart + numOfPages - 1;

            // 如果結束頁碼大於總頁數，則將其設為總頁數。 確保結束頁碼不會超過總頁數。
            if(pageEnd > lastPageNo) pageEnd = lastPageNo;

            // 產生顯示當前頁碼和總頁數的 HTML 程式碼。
            b += '<span class="page-of">' + pageOf[0] + ' ' + currentPageNo + ' ' + pageOf[1] + ' ' + lastPageNo + '</span>';
            
            // 計算當前頁的前一頁頁碼
            var c = parseInt(currentPageNo) - 1;

            if(currentPageNo > 1) {  // 檢查目前頁碼是否大於 1，表示有上一頁,如果有上一頁，則執行以下程式碼
                if(currentPageNo == 2) {  // 如果是第 2 頁，則產生連回首頁的連結
                    if(currentPage == 'page') { //根據 currentPage 變數判斷是文章頁或標籤頁，產生不同的連結
                        b += '<a class="page-num page-prev" href="' + home_page + '"></a>'
                    } else {
                        b += '<a class="page-num page-prev" href="/search/label/' + postLabel + '?&max-results=' + postResults + '"></a>'
                    }
                } else {  // 如果目前頁碼不是第 2 頁，則產生上一頁的連結
                    if(currentPage == 'page') {
                        //  如果是 page 則 呼叫 getPage()    
                        b += '<a class="page-num page-prev" href="#" onclick="getPage(' + c + ');return false "></a>'
                    } else {
                        //  如果是標籤頁 則呼叫 getLabelPage()
                        b += '<a class="page-num page-prev" href="#" onclick="getLabelPage(' + c + ');return false "></a>'
                    }
                }
            }
            if(pageStart > 1) {  // 如果 pageStart 大於 1，表示目前顯示的分頁連結不是從第 1 頁開始，因此需要顯示第 1 頁的連結。
                if(currentPage == "page") {  // 區分目前頁面是文章頁還是標籤頁。
                    // 目前是文章頁，需要產生連回首頁的連結。
                    b += '<a class="page-num" href="' + home_page + '">1</a>'
                } else {  
                    // 目前是標籤頁，需要產生連回標籤第一頁的連結。
                    b += '<a class="page-num" href="/search/label/' + postLabel + '?&max-results=' + postResults + '">1</a>'
                    // 將標籤第一頁的連結 HTML 程式碼加到變數 b 中。
                }
            }
            if(pageStart > 2) {
                b += '<span class="page-num page-dots">...</span>'
            }

            for(var d = pageStart; d <= pageEnd; d++) {  // d 變數代表當前迭代的頁碼。
                if(currentPageNo == d) {  // 檢查當前頁碼 d 是否等於 currentPageNo
                    b += '<span class="page-num page-active">' + d + '</span>' //把 d 加到 活動頁碼的 HTML 程式碼裡
                    
                } else if(d == 1) {  
                    // 如果當前頁碼 d 不是currentPageNo，則檢查它是否為 1。
                    //這是為了確保第一頁的連結始終存在，並根據頁面類型（文章頁或標籤頁）產生正確的連結。
                    if(currentPage == 'page') {
                        // 如果是文章頁，產生連回首頁的連結。
                        b += '<a class="page-num" href="' + home_page + '">1</a>'
                    } else {
                        // 產生連回標籤第一頁的連結
                        b += '<a class="page-num" href="/search/label/' + postLabel + '?&max-results=' + postResults + '">1</a>'
                    }
                } else {  // 如果當前頁碼 d 既不是currentPageNo，也不是 1, 則產生普通頁碼連結。
                    if(currentPage == 'page') { // 檢查 currentPage 是否等於 "page"，判斷當前是否為文章頁。
                        // 產生文章頁的頁碼連結，點擊時呼叫 getPage() 函式。
                        b += '<a class="page-num" href="#" onclick="getPage(' + d + ');return false ">'+d+'</a>'
                    } else {
                        // 產生標籤頁的頁碼連結，點擊時呼叫 getLabelPage() 函式。
                        b += '<a class="page-num" href="#" onclick="getLabelPage(' + d + '); return false ">'+d+'</a>'
                    }
                }
            }
            if(pageEnd < lastPageNo - 1) {  // 判斷是否需要顯示省略符號。
                b += '<span class="page-num page-dots">...</span>'
            }
            if(pageEnd < lastPageNo) { // pageEnd 是否小於 lastPageNo，判斷是否需要顯示最後一頁的連結。
                if(currentPage == "page") {  //  是否等於 "page"，判斷當前是否為文章頁。
                    // 產生最後一頁的連結，點擊時呼叫 getPage() 函式。
                    b += '<a class="page-num" href="#" onclick="getPage(' + lastPageNo + ');return false ">'+lastPageNo+'</a>'
                } else {  // 不是 "page"，表示當前是標籤頁。
                    //  產生最後一頁的連結，點擊時呼叫 getLabelPage() 函式。
                    b += '<a class="page-num" href="#" onclick="getLabelPage(' + lastPageNo + ');return false ">'+lastPageNo+'</a>'
                }
            }

           
            var e = parseInt(currentPageNo) + 1;  //  用於產生下一頁的頁碼。
            if(currentPageNo < lastPageNo) {  // 當前頁碼是否小於最後一頁，如果是表示有下一頁，需要產生下一頁的連結。
                if(currentPage == 'page') {
                    b += '<a class="page-num page-next" href="#" onclick="getPage(' + e + ');return false "></a>'
                } else {
                    b += '<a class="page-num page-next" href="#" onclick="getLabelPage(' + e + ');return false "></a>'
                }
            }
            b += ''; // 將一個空字串加到變數 b 中
            var f = document.getElementsByName('pageArea');
            var g = document.getElementById('blog-pager');
            for(var p = 0; p < f.length; p++) {  // 使用 for 迴圈迭代 f 陣列(pageArea)中的所有元素。
                f[p].innerHTML = b   
                //將變數 b 中生成的分頁 HTML 程式碼賦值給每個元素的 innerHTML 屬性，從而將分頁控制元件插入到網頁中。
            }
            if(f && f.length > 0) { // 檢查 f 是否存在且長度大於 0。
                b = ''
                // 如果是，表示已經將分頁控制元件插入到 pageArea 元素中，將變數 b 清空，以便將其用於 blog-pager 元素。
            }
            if(g) {  // 檢查 g 是否存在。
                g.innerHTML = b
            }
        }

        // 處理從 Blogger API 取得的文章資料。
        function dataFeed(a) {
            var b = a.feed;
            var c = parseInt(b.openSearch$totalResults.$t, 10);
            startPagination(c)
        }

        // 判斷目前頁面類型 (文章頁或標籤頁) 及取得相關資訊。
        /* pageCurrentBlogger() 函式根據當前頁面的 URL，
        判斷頁面類型、提取標籤名稱、提取頁碼，並載入相應的 Blogger API 資料，
        以便後續的分頁功能可以正常執行。*/

        function pageCurrentBlogger() {

            var a = locationUrl;
            //indexOf() 方法返回子字串在字串中首次出現的索引，如果不存在則返回 -1。
            // 檢查 URL a 中是否包含 /search/label/，判斷當前頁面是否為標籤頁。
            if(a.indexOf('/search/label/') != -1) {

                // 在標籤頁的情況下，進一步判斷 URL 中是否包含 ?updated-max，用於區分按日期過濾的標籤頁和普通的標籤頁。
                if(a.indexOf('?updated-max') != -1) {
                    // 如果 URL 包含 ?updated-max，則提取標籤名稱。
                    postLabel = a.substring(a.indexOf('/search/label/') + 14, a.indexOf('?updated-max'))
                    /*
                        substring() 方法用於提取字串的子字串。
                        a.indexOf('/search/label/') + 14 計算標籤名稱的起始索引。
                        a.indexOf('?updated-max') 計算標籤名稱的結束索引。
                    */
                } else {
                    postLabel = a.substring(a.indexOf('/search/label/') + 14, a.indexOf('?&max'))
                    //  如果 URL 不包含 ?updated-max，則提取標籤名稱。
                    //  但使用 ?&max 作為結束索引。
                }
            }
            // 檢查 URL a 中是否不包含 ?q=（搜尋查詢）和 .html（文章頁面），用於判斷當前頁面是否為分頁頁面。
            if(a.indexOf('?q=') == -1 && a.indexOf('.html') == -1) {
                // 判斷當前頁面是否為標籤頁。
                if(a.indexOf('/search/label/') == -1) {
                    // 如果不是標籤頁，則設置全局變數 currentPage 為 "page"，表示當前是文章頁。
                    currentPage = 'page';
                    // 檢查 URL 中是否包含 #PageNo=，用於提取頁碼。
                    if(locationUrl.indexOf('#PageNo=') != -1) {  // 如果URL中包含 #PageNo=，
                        // 提取頁碼並賦值給全局變數 currentPageNo。
                        currentPageNo = locationUrl.substring(locationUrl.indexOf('#PageNo=') + 8, locationUrl.length)
                    } else {   // 如果 URL 中不包含 #PageNo=，
                        // 則設置 currentPageNo 為 1，表示第一頁。
                        currentPageNo = 1
                    }
                    // 動態載入 JavaScript，從 Blogger API 取得文章摘要資料。
                    document.write('<script src=\'' + home_page + 'feeds/posts/summary?max-results=1&alt=json-in-script&callback=dataFeed\'><\/script>')
                    // alt=json-in-script 指定以 JSONP 格式返回資料。
                    // callback=dataFeed 指定回呼函式為 dataFeed()

                } else {
                    currentPage = 'label';   // 如果是標籤頁，則設置 currentPage 為 "label"。

                    if(a.indexOf('&max-results=') == -1) { // 如果標籤 URL 中不包含 &max-results=，
                        postResults = 20   // 設置 postResults 為 20，表示每頁顯示 20 篇文章。
                    }
                    if(locationUrl.indexOf('#PageNo=') != -1) {  // 如果URL中包含 #PageNo=，
                        // 提取頁碼並賦值給全局變數 currentPageNo。
                        currentPageNo = locationUrl.substring(locationUrl.indexOf('#PageNo=') + 8, locationUrl.length)
                    } else {  // 如果 URL 中不包含 #PageNo=，
                        // 則設置 currentPageNo 為 1，表示第一頁。
                        currentPageNo = 1
                    }
                    // 動態載入 JavaScript，從 Blogger API 取得特定標籤的文章摘要資料。
                    document.write('<script src="' + home_page + 'feeds/posts/summary/-/' + postLabel + '?alt=json-in-script&callback=dataFeed&max-results=1" ><\/script>')
                    // 使用 document.write() 方法動態載入 Blogger API 的 JSONP 資料，用於獲取指定標籤下的文章總數。
                    //  -/ + postLabel 指定要獲取指定標籤下的文章。        
                }
            }
        }

        // 用於產生文章頁的 JSON 連結。
        /* getPage(a) 函式通過動態創建 <script> 元素，向 Blogger API 發送 JSONP 請求，
           獲取指定頁碼的文章摘要資料，
           並使用 findPostDate() 函式處理返回的資料，
           以實現文章頁面的分頁功能。*/

        function getPage(a) {  // a 是傳入函式的參數，表示使用者點擊的頁碼。
            jsonstart = (a - 1) * postResults;  //  計算出該頁第一篇文章在所有文章中的索引位置。
            noPage = a;  //用於在後續的 findPostDate() 函式中使用，以確定跳轉到哪一頁。
            var b = document.getElementsByTagName('head')[0];  // 返回一個包含所有 <head> 標籤的第一個
            var c = document.createElement('script');  // 碼創建一個新的 <script> 元素並賦值給變數 c
            c.type = 'text/javascript';  // 設置新創建的 <script> 元素的 type 屬性為 "text/javascript"。
            // c.setAttribute() 方法設定script標籤的src屬性。
            c.setAttribute('src', home_page + 'feeds/posts/summary?start-index=' + jsonstart + '&max-results=1&alt=json-in-script&callback=findPostDate');
            // 設置新創建的 <script> 元素的 src 屬性，指定要加載的外部 JavaScript 文件的 URL。
            //  指定回呼函式為 findPostDate()。    
            b.appendChild(c)
        }

        // 用於產生標籤頁的 JSON 連結。
        function getLabelPage(a) {
            jsonstart = (a - 1) * postResults;
            noPage = a;
            var b = document.getElementsByTagName('head')[0];
            var c = document.createElement('script');
            c.type = 'text/javascript';
            c.setAttribute('src', home_page + 'feeds/posts/summary/-/' + postLabel + '?start-index=' + jsonstart + '&max-results=1&alt=json-in-script&callback=findPostDate');
            b.appendChild(c)
        }

        // 用於尋找文章發佈日期並生成一個跳轉 URL，將瀏覽器重定向到該 URL。並跳轉到該頁面。
        function findPostDate(a) {
            post = a.feed.entry[0];
            var b = post.published.$t.substring(0, 19) + post.published.$t.substring(23, 29);

            //encodeURIComponent() 函式用於將字串轉換為 URL 安全的格式，以防止特殊字元導致 URL 解析錯誤。sd
            var c = encodeURIComponent(b);

            if(currentPage == 'page') {
                var d = '/search?updated-max=' + c + '&max-results=' + postResults + '#PageNo=' + noPage
                /*
                   '/search?updated-max=' + c 指定按發佈日期過濾文章。
                   '&max-results=' + postResults 指定每頁顯示的文章數量。
                   '#PageNo=' + noPage 指定跳轉到的頁碼。
                */
            } else {
                var d = '/search/label/' + postLabel + '?updated-max=' + c + '&max-results=' + postResults + '#PageNo=' + noPage
                //   '/search/label/' + postLabel 指定要跳轉到的標籤頁。
            }

            location.href = d
            //  將瀏覽器重定向到生成的跳轉 URL d
            //  location.href 屬性用於獲取或設置當前頁面的 URL。
        }

        /* findPostDate(a) 函式從 Blogger API 返回的文章資料中提取發佈日期，
        並根據當前頁面類型和頁碼，生成一個跳轉 URL，
        然後將瀏覽器重定向到該 URL，以實現按發佈日期和頁碼跳轉的功能。*/
    </script>
  </body>
</html>